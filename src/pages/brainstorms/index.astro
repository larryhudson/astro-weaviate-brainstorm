---
import { createBrainstorm } from "@src/weaviate/crud";

if (Astro.request.method === "POST") {
    // create a new brainstorm
    const formData = await Astro.request.formData();
    const title = formData.get("title");
    const userId = 1;

    const createdBrainstorm = await createBrainstorm({
        title,
        userId,
    });

    const createdBrainstormId = createdBrainstorm.id;

    return Astro.redirect(`/brainstorms/${createdBrainstormId}`);
} else {
    return Astro.redirect("/");
}
---
